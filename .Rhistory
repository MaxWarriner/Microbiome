Isyourkitcheninyourhouseorsepatated == 2 ~ "Separated",
Isyourkitcheninyourhouseorsepatated == 99 | is.na(Isyourkitcheninyourhouseorsepatated) ~ "Don't Know")) |>
mutate(Ifseparetedwhatmaterialsyourkitchenmadefrom = case_when(Ifseparetedwhatmaterialsyourkitchenmadefrom == 0 ~ "Dust",
Ifseparetedwhatmaterialsyourkitchenmadefrom == 1 ~ "Cement",
Ifseparetedwhatmaterialsyourkitchenmadefrom == 2 ~ "Plastic Covered",
is.na(Ifseparetedwhatmaterialsyourkitchenmadefrom) | Ifseparetedwhatmaterialsyourkitchenmadefrom == 9 ~ "Don't Know")) |>
mutate(Roof = ifelse(Roof == 1, "Yes", "No"),
Wall = ifelse(Wall == 2, "Yes", "No"),
None = ifelse(None == 0, "Yes", "No")) |>
mutate(Roof = ifelse(is.na(Roof), "No", Roof),
Wall = ifelse(is.na(Wall), "No", Wall),
None = ifelse(is.na(None), "No", None)) |>
mutate(Wood = ifelse(Wood == 0, "Yes", "No"),
Gas = ifelse(Gas == 1, "Yes", "No"),
Coal = ifelse(Coal == 2, "Yes", "No"),
Kerosisn = ifelse(Kerosisn == 3, "Yes", "No"),
Electric = ifelse(Electric == 4, "Yes", "No")) |>
mutate(Wood = ifelse(is.na(Wood), "No", Wood),
Gas = ifelse(is.na(Gas), "No", Gas),
Kerosisn = ifelse(is.na(Kerosisn), "No", Kerosisn),
Coal = ifelse(is.na(Coal), "No", Coal),
Electric = ifelse(is.na(Electric), "No", Electric)) |>
mutate(Doyouhaveelectricityinyourhaouse = case_when(Doyouhaveelectricityinyourhaouse == 0 ~ "No",
Doyouhaveelectricityinyourhaouse == 1 ~ "Yes",
is.na(Doyouhaveelectricityinyourhaouse) ~ "Don't Know")) |>
mutate(Doesyourfamillyownradio = case_when(Doesyourfamillyownradio == 0 ~ "No",
Doesyourfamillyownradio == 1 ~ "Yes",
is.na(Doesyourfamillyownradio) ~ "Don't Know")) |>
mutate(Doesyourfamillyowntelevision = case_when(Doesyourfamillyowntelevision == 0 ~ "No",
Doesyourfamillyowntelevision == 1 ~ "Yes",
is.na(Doesyourfamillyowntelevision) ~ "Don't Know")) |>
mutate(Doesyourfamillymemberownaphone = case_when(Doesyourfamillymemberownaphone == 0 ~ "No",
Doesyourfamillymemberownaphone == 1 ~ "Yes",
is.na(Doesyourfamillymemberownaphone) ~ "Don't Know")) |>
mutate(Forwhatpurposeyourfamilyuseaphone = case_when(Forwhatpurposeyourfamilyuseaphone == 0 ~ "Call Only",
Forwhatpurposeyourfamilyuseaphone == 1 ~ "Call/Radio/Internet",
is.na(Forwhatpurposeyourfamilyuseaphone) ~ "Don't Know")) |>
mutate(Cattle = ifelse(Cattle == 0, "Yes", "No"),
SheepGoat = ifelse(SheepGoat == 1, "Yes", "No"),
Chicken = ifelse(Chicken == 2, "Yes", "No"),
Pet = ifelse(Pet == 3, "Yes", "No"),
Nodomanimal = ifelse(Nodomanimal == 4, "Yes", "No")) |>
mutate(Cattle = ifelse(is.na(Cattle), "No", Cattle),
SheepGoat = ifelse(is.na(SheepGoat), "No", SheepGoat),
Chicken = ifelse(is.na(Chicken), "No", Chicken),
Pet = ifelse(is.na(Pet), "No", Pet),
Nodomanimal = ifelse(is.na(Nodomanimal), "No", Nodomanimal)) |>
mutate(Doyouhavepotablewaterinyourhouse = case_when(Doyouhavepotablewaterinyourhouse == 0 ~ "No",
Doyouhavepotablewaterinyourhouse == 1 ~ "Yes",
is.na(Doyouhavepotablewaterinyourhouse) ~ "Don't Know")) |>
mutate(Ifnotwheredoyougetyordrinkingwaterfrom = case_when(Ifnotwheredoyougetyordrinkingwaterfrom == 0 ~ "Neighbor",
Ifnotwheredoyougetyordrinkingwaterfrom == 1 ~ "River",
Ifnotwheredoyougetyordrinkingwaterfrom == 2 ~ "Well",
Ifnotwheredoyougetyordrinkingwaterfrom == 3 ~ "Truck",
Ifnotwheredoyougetyordrinkingwaterfrom == 4 ~ "Tank",
Ifnotwheredoyougetyordrinkingwaterfrom == 5 ~ "Public Fountain",
Ifnotwheredoyougetyordrinkingwaterfrom == "Tap water" ~ "Tap Water",
Ifnotwheredoyougetyordrinkingwaterfrom == 10 ~ NA)) |>
mutate(Doyoudrinkdirectlyordoyoutreat = case_when(Doyoudrinkdirectlyordoyoutreat == 1 ~ "Directly",
Doyoudrinkdirectlyordoyoutreat == 0 ~ "Treat",
is.na(Doyoudrinkdirectlyordoyoutreat) ~ "Don't Know")) |>
mutate(Ifyoutreathow = case_when(Ifyoutreathow == 0 ~ "Boil",
Ifyoutreathow == 1 ~ "Chemical",
Ifyoutreathow == 2 ~ "Filter",
Ifyoutreathow == 99 ~ "Don't Know")) |>
mutate(Doyourfamilyownlatrine = ifelse(Doyourfamilyownlatrine == 1, "Yes", "No")) |>
mutate(Isyourlatrineinsideoroutside = ifelse(Isyourlatrineinsideoroutside == 1, "Inside", "Outside")) |>
mutate(Ifoutsidedistancefromyourhouse = as.numeric(str_sub(Ifoutsidedistancefromyourhouse, 1, -2))) |>
mutate(Distancebetweenlatrineandyourkitchen = as.numeric(str_sub(Distancebetweenlatrineandyourkitchen, 1, -2))) |>
mutate(Yourlatrineconnectedto = case_when(Yourlatrineconnectedto == 0 ~ "Sewage",
Yourlatrineconnectedto == 1 ~ "Ditch",
Yourlatrineconnectedto == 2 ~ "River",
Yourlatrineconnectedto == 3 ~ "Well",
Yourlatrineconnectedto == 99 | is.na(Yourlatrineconnectedto) ~ "NA/Don't Know")) |>
mutate(Howoftendoyoubathinriver = case_when(Howoftendoyoubathinriver == 0 ~ "Always",
Howoftendoyoubathinriver == 1 ~ "Sometimes",
Howoftendoyoubathinriver == 2 ~ "Never",
Howoftendoyoubathinriver == 99 | is.na(Howoftendoyoubathinriver) ~ "NA/Don't Know"),
Howoftendoyoubathinriver = factor(Howoftendoyoubathinriver, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Howoftendoyouwashyourclothesinriver = case_when(Howoftendoyouwashyourclothesinriver == 0 ~ "Always",
Howoftendoyouwashyourclothesinriver == 1 ~ "Sometimes",
Howoftendoyouwashyourclothesinriver == 2 ~ "Never",
Howoftendoyouwashyourclothesinriver == 99 | is.na(Howoftendoyouwashyourclothesinriver) ~ "NA/Don't Know"),
Howoftendoyouwashyourclothesinriver = factor(Howoftendoyouwashyourclothesinriver, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyoudeficateintheopenfield = case_when(Doyoudeficateintheopenfield == 0 ~ "Always",
Doyoudeficateintheopenfield == 1 ~ "Sometimes",
Doyoudeficateintheopenfield == 2 ~ "Never",
Doyoudeficateintheopenfield == 99 | is.na(Doyoudeficateintheopenfield) ~ "NA/Don't Know"),
Doyoudeficateintheopenfield = factor(Doyoudeficateintheopenfield, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouuseschoollatrine = case_when(Doyouuseschoollatrine == 0 ~ "Always",
Doyouuseschoollatrine == 1 ~ "Sometimes",
Doyouuseschoollatrine == 2 ~ "Never",
Doyouuseschoollatrine == 99 | is.na(Doyouuseschoollatrine) ~ "NA/Don't Know"),
Doyouuseschoollatrine = factor(Doyouuseschoollatrine, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouusetoiletpapertowipeyourbumafterdefication = case_when(Doyouusetoiletpapertowipeyourbumafterdefication == 0 ~ "Always",
Doyouusetoiletpapertowipeyourbumafterdefication == 1 ~ "Sometimes",
Doyouusetoiletpapertowipeyourbumafterdefication == 2 ~ "Never",
Doyouusetoiletpapertowipeyourbumafterdefication == 99 | is.na(Doyouusetoiletpapertowipeyourbumafterdefication) ~ "NA/Don't Know"),
Doyouusetoiletpapertowipeyourbumafterdefication = factor(Doyouusetoiletpapertowipeyourbumafterdefication, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouwashyourhandsaftertoilet = case_when(Doyouwashyourhandsaftertoilet == 0 ~ "Always",
Doyouwashyourhandsaftertoilet == 1 ~ "Sometimes",
Doyouwashyourhandsaftertoilet == 2 ~ "Never",
Doyouwashyourhandsaftertoilet == 99 | is.na(Doyouwashyourhandsaftertoilet) ~ "NA/Don't Know"),
Doyouwashyourhandsaftertoilet = factor(Doyouwashyourhandsaftertoilet, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Howdoyouwashyourhandsaftertoilet = case_when(Howdoyouwashyourhandsaftertoilet == 0 ~ "Water",
Howdoyouwashyourhandsaftertoilet == 1 ~ "Soap and Water",
Howdoyouwashyourhandsaftertoilet == 99 | is.na(Howdoyouwashyourhandsaftertoilet) ~ "NA/Don't Know"),
Howdoyouwashyourhandsaftertoilet = factor(Howdoyouwashyourhandsaftertoilet, levels = c("Water", "Soap and Water", "NA/Don't Know"))) |>
mutate(Ifwithsoaphowoftenyouuseit = case_when(Ifwithsoaphowoftenyouuseit == 0 ~ "Always",
Ifwithsoaphowoftenyouuseit == 1 ~ "Sometimes",
Ifwithsoaphowoftenyouuseit == 2 ~ "Never",
Ifwithsoaphowoftenyouuseit == 99 | is.na(Ifwithsoaphowoftenyouuseit) ~ "NA/Don't Know"),
Ifwithsoaphowoftenyouuseit = factor(Ifwithsoaphowoftenyouuseit, levels = c("Never", "Sometimes","Always", "NA/Don't Know"))) |>
mutate(Doyouwashyourhandsbeforeeating = case_when(Doyouwashyourhandsbeforeeating == 0 ~ "Always",
Doyouwashyourhandsbeforeeating == 1 ~ "Sometimes",
Doyouwashyourhandsbeforeeating == 2 ~ "Never",
Doyouwashyourhandsbeforeeating == 99 | is.na(Doyouwashyourhandsbeforeeating) ~ "NA/Don't Know"),
Doyouwashyourhandsbeforeeating = factor(Doyouwashyourhandsbeforeeating, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Howdoyouwashyourhandsbeforeeating = case_when(Howdoyouwashyourhandsbeforeeating == 0 ~ "Water",
Howdoyouwashyourhandsbeforeeating == 1 ~ "Soap and Water",
Howdoyouwashyourhandsbeforeeating == 99 | is.na(Howdoyouwashyourhandsbeforeeating) | Howdoyouwashyourhandsbeforeeating == 2 ~ "NA/Don't Know"),
Howdoyouwashyourhandsbeforeeating = factor(Howdoyouwashyourhandsbeforeeating, levels = c("Water", "Soap and Water", "NA/Don't Know"))) |>
mutate(Ifwithsoaphowoftenyouuseit_A = case_when(Ifwithsoaphowoftenyouuseit_A == 0 ~ "Always",
Ifwithsoaphowoftenyouuseit_A == 1 ~ "Sometimes",
Ifwithsoaphowoftenyouuseit_A == 2 ~ "Never",
Ifwithsoaphowoftenyouuseit_A == 99 | is.na(Ifwithsoaphowoftenyouuseit_A) ~ "NA/Don't Know"),
Ifwithsoaphowoftenyouuseit_A = factor(Ifwithsoaphowoftenyouuseit_A, levels = c("Never", "Sometimes","Always", "NA/Don't Know"))) |>
mutate(Doyoueatsoil = case_when(Doyoueatsoil == 0 ~ "Always",
Doyoueatsoil == 1 ~ "Sometimes",
Doyoueatsoil == 2 ~ "Never",
Doyoueatsoil == 99 | is.na(Doyoueatsoil) ~ "NA/Don't Know"),
Doyoueatsoil = factor(Doyoueatsoil, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Whatisyourfavoritefruitethatyoueat = ifelse(Whatisyourfavoritefruitethatyoueat != "Mango" & Whatisyourfavoritefruitethatyoueat != "Banana" & Whatisyourfavoritefruitethatyoueat != "Avocado" & Whatisyourfavoritefruitethatyoueat != "Apple" & Whatisyourfavoritefruitethatyoueat != "Pinapple", "Other", Whatisyourfavoritefruitethatyoueat),
Whatisyourfavoritefruitethatyoueat = ifelse(is.na(whatfooddoyoueatmost), "Other", Whatisyourfavoritefruitethatyoueat)) |>
mutate(Doyouwashyourfruitesbeforeeating = case_when(Doyouwashyourfruitesbeforeeating == 0 ~ "Always",
Doyouwashyourfruitesbeforeeating == 1 ~ "Sometimes",
Doyouwashyourfruitesbeforeeating == 2 ~ "Never",
Doyouwashyourfruitesbeforeeating == 99 | is.na(Doyouwashyourfruitesbeforeeating) ~ "NA/Don't Know"),
Doyouwashyourfruitesbeforeeating = factor(Doyouwashyourfruitesbeforeeating, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyoueatraworundercookedvegitables = case_when(Doyoueatraworundercookedvegitables == 0 ~ "Always",
Doyoueatraworundercookedvegitables == 1 ~ "Sometimes",
Doyoueatraworundercookedvegitables == 2 ~ "Never",
Doyoueatraworundercookedvegitables == 99 | is.na(Doyoueatraworundercookedvegitables) ~ "NA/Don't Know"),
Doyoueatraworundercookedvegitables = factor(Doyoueatraworundercookedvegitables, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Ifyeshowoftenyouwashyourvegitablesbeforeeating = case_when(Ifyeshowoftenyouwashyourvegitablesbeforeeating == 0 ~ "Always",
Ifyeshowoftenyouwashyourvegitablesbeforeeating == 1 ~ "Sometimes",
Ifyeshowoftenyouwashyourvegitablesbeforeeating == 2 ~ "Never",
Ifyeshowoftenyouwashyourvegitablesbeforeeating == 99 | is.na(Ifyeshowoftenyouwashyourvegitablesbeforeeating) ~ "NA/Don't Know"),
Ifyeshowoftenyouwashyourvegitablesbeforeeating = factor(Ifyeshowoftenyouwashyourvegitablesbeforeeating, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouwalkbarefoot = case_when(Doyouwalkbarefoot == 0 ~ "Always",
Doyouwalkbarefoot == 1 ~ "Sometimes",
Doyouwalkbarefoot == 2 ~ "Never",
Doyouwalkbarefoot == 99 | is.na(Doyouwalkbarefoot) ~ "NA/Don't Know"),
Doyouwalkbarefoot = factor(Doyouwalkbarefoot, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(whenyouareathomedoyoupreferetousesandalsorshoe = case_when(whenyouareathomedoyoupreferetousesandalsorshoe == 0 ~ "Barefoot",
whenyouareathomedoyoupreferetousesandalsorshoe == 1 ~ "Sandals",
whenyouareathomedoyoupreferetousesandalsorshoe == 2 ~ "Shoes",
whenyouareathomedoyoupreferetousesandalsorshoe == 99 | is.na(whenyouareathomedoyoupreferetousesandalsorshoe) ~ "NA/Don't Know"),
whenyouareathomedoyoupreferetousesandalsorshoe = factor(whenyouareathomedoyoupreferetousesandalsorshoe, levels = c("Barefoot", "Sandals", "Shoes", "NA/Don't Know"))) |>
mutate(Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill = case_when(Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill == 0 ~ "No",
Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill == 1 ~ "Yes",
Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill == 99 | is.na(Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill) ~ "NA/Don't Know"))|>
mutate(Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill = case_when(Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "1Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "2Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "3month" ~ "1-3 Months",
Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "5Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "6Month" ~ "4-6 Months",
Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "7Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "9Month" ~ "7-9 Months",
Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "11Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "12month" ~ ">9 Months",
is.na(Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill) ~ NA)) |>
mutate(Didyourparentsorhealthprofessionalsgaveyouotherantibiotics = case_when(Didyourparentsorhealthprofessionalsgaveyouotherantibiotics == 0 ~ "No",
Didyourparentsorhealthprofessionalsgaveyouotherantibiotics == 1 ~ "Yes",
Didyourparentsorhealthprofessionalsgaveyouotherantibiotics == 99 | is.na(Didyourparentsorhealthprofessionalsgaveyouotherantibiotics) ~ "NA/Don't Know")) |>
mutate(Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently = case_when(Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently == 0 ~ "No",
Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently == 1 ~ "Yes",
Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently == 99 | is.na(Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently) ~ "NA/Don't Know")) |>
mutate(Inthepastthreemonthshaveyoutakenanyantimalarialdrug = case_when(Inthepastthreemonthshaveyoutakenanyantimalarialdrug == 0 ~ "No",
Inthepastthreemonthshaveyoutakenanyantimalarialdrug == 1 ~ "Yes",
Inthepastthreemonthshaveyoutakenanyantimalarialdrug == 99 | is.na(Inthepastthreemonthshaveyoutakenanyantimalarialdrug) ~ "NA/Don't Know")) |>
mutate(Haveachildwheezingorwhistlinginchest = case_when(Haveachildwheezingorwhistlinginchest == 2 ~ "No",
Haveachildwheezingorwhistlinginchest == 1 ~ "Yes",
Haveachildwheezingorwhistlinginchest == 99 | is.na(Haveachildwheezingorwhistlinginchest) ~ "NA/Don't Know")) |>
mutate(Howmanytimesinthelastyearthechildhadwheeziling = case_when(Howmanytimesinthelastyearthechildhadwheeziling == 2 ~ "1-3",
Howmanytimesinthelastyearthechildhadwheeziling == 1 ~ "0",
Howmanytimesinthelastyearthechildhadwheeziling == 99 | is.na(Howmanytimesinthelastyearthechildhadwheeziling) ~ "NA/Don't Know")) |>
mutate(Hasachildeverhadasthma = case_when(Hasachildeverhadasthma == 2 ~ "No",
Hasachildeverhadasthma == 1 ~ "Yes",
Hasachildeverhadasthma == 99 | is.na(Hasachildeverhadasthma) ~ "NA/Don't Know")) |>
mutate(Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases = case_when(Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases == 2 ~ "No",
Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases == 1 ~ "Yes",
Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases == 99 | is.na(Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases) ~ "NA/Don't Know")) |>
mutate(Ifyeshasthisrashaffectedtheelbowfolds = ifelse(is.na(Ifyeshasthisrashaffectedtheelbowfolds), 0, Ifyeshasthisrashaffectedtheelbowfolds),
Ifyeshasthisrashaffectedbehindtheknees = ifelse(is.na(Ifyeshasthisrashaffectedbehindtheknees), 0, Ifyeshasthisrashaffectedbehindtheknees),
Ifyeshasthisrashaffectedinfrontoftheankls = ifelse(is.na(Ifyeshasthisrashaffectedinfrontoftheankls), 0, Ifyeshasthisrashaffectedinfrontoftheankls),
Ifyeshasthisrashaffectedunderthebuttucks = ifelse(is.na(Ifyeshasthisrashaffectedunderthebuttucks), 0, Ifyeshasthisrashaffectedunderthebuttucks),
Ifyeshasthisrashaffectedaroundtheneck = ifelse(is.na(Ifyeshasthisrashaffectedaroundtheneck), 0, Ifyeshasthisrashaffectedaroundtheneck),
Ifyeshasthisrashaffectedaroundtheeyesears = ifelse(is.na(Ifyeshasthisrashaffectedaroundtheeyesears), 0, Ifyeshasthisrashaffectedaroundtheeyesears)) |>
select(-AL, -TT, -HW, -SM, -Others, -Date, -parentconsent, -childassent, -Grade, -GradeLet, -WAZ, -HAZ, -BAZ, -Wheredoyoulive, -Doesachildasthmainthelastyear, -Doesachildhadasthmainthelast2years, -Hasthisbeenconfirmedbyadoctor, -Doesthechildhadhayfeverorsneezingwithrunningnoseinthelast2years, -Doesthechildhadhayfeverorsneezingwithrunningnoseinthelastyear, -V137, -AgeGroup, -HouseholdGroup) |>
mutate(Doesthechildhadhayfeverorpersistantsneezing = case_when(Doesthechildhadhayfeverorpersistantsneezing == 2 ~ "No",
Doesthechildhadhayfeverorpersistantsneezing == 1 ~ "Yes",
Doesthechildhadhayfeverorpersistantsneezing == 99 | is.na(Doesthechildhadhayfeverorpersistantsneezing) ~ "NA/Don't Know")) |>
mutate(Arechildsfingernailsdirty = ifelse(Arechildsfingernailsdirty == 1, "Yes", "No")) |>
rename(Kerosene = Kerosisn) |>
select(-ID, -Seq_ID)
library(phyloseq)
library(vegan)
library(dplyr)
library(ggplot2)
library(stringr)
library(phyloseq)
analysis_dat <- sample_data |>
mutate(Underweight = ifelse(Underweight == 1, "Underweight", "Not Underweight")) |>
mutate(HeardALnamebefore = ifelse(HeardALnamebefore == 0, 1, 0),
HeardTTnamebefore = ifelse(HeardTTnamebefore == 1, 1, 0),
HeardHWnamebefore = ifelse(HeardHWnamebefore == 2, 1, 0),
HeardHIVnamebefore = ifelse(HeardHIVnamebefore == 3, 1, 0),
HeardInWormnamebefore = ifelse(HeardInWormnamebefore == 4, 1, 0),
HeardMalanamebefore = ifelse(HeardMalanamebefore == 5, 1, 0),
HeardTBnamebefore = ifelse(HeardTBnamebefore == 6, 1, 0),
HeardSChnamebefore = ifelse(HeardSChnamebefore == 7, 1, 0)) |>
mutate(HeardALnamebefore = ifelse(is.na(HeardALnamebefore), 0, HeardALnamebefore),
HeardTTnamebefore = ifelse(is.na(HeardTTnamebefore), 0, HeardTTnamebefore),
HeardHWnamebefore = ifelse(is.na(HeardHWnamebefore), 0, HeardHWnamebefore),
HeardHIVnamebefore = ifelse(is.na(HeardHIVnamebefore), 0, HeardHIVnamebefore),
HeardInWormnamebefore = ifelse(is.na(HeardInWormnamebefore), 0, HeardInWormnamebefore),
HeardMalanamebefore = ifelse(is.na(HeardMalanamebefore), 0, HeardMalanamebefore),
HeardTBnamebefore = ifelse(is.na(HeardTBnamebefore), 0, HeardTBnamebefore),
HeardSChnamebefore = ifelse(is.na(HeardSChnamebefore), 0, HeardSChnamebefore)) |>
mutate(familytold = ifelse(familytold == 0, 1, 0),
HPtold = ifelse(HPtold == 1, 1, 0),
Teachertold = ifelse(Teachertold == 2, 1, 0),
Mediatold = ifelse(Mediatold == 3, 1, 0)) |>
mutate(familytold = ifelse(is.na(familytold), 0, familytold),
HPtold = ifelse(is.na(HPtold), 0, HPtold),
Teachertold = ifelse(is.na(Teachertold), 0, Teachertold),
Mediatold = ifelse(is.na(Mediatold), 0, Mediatold)) |>
mutate(Maternaleducationalstatus = case_when(Maternaleducationalstatus == 0 ~ "Illiterate",
Maternaleducationalstatus == 1 ~ "Primary School",
Maternaleducationalstatus == 2 ~ "High School",
Maternaleducationalstatus == 3 ~ "Higher Education",
Maternaleducationalstatus == 99 ~ "Don't Know",
is.na(Maternaleducationalstatus) ~ "Don't Know")) |>
mutate(Maternaleducationalstatus = factor(Maternaleducationalstatus, levels = c("Illiterate", "Primary School", "High School", "Higher Education", "Don't Know"))) |>
mutate(Dewormingin1yr = ifelse(Dewormingin1yr == 1, "Yes", "No")) |>
mutate(Modeofdelivery = ifelse(Modeofdelivery == 1, "Vaginal", "C-Section")) |>
rename(`Older Siblings` = Noofolderbrothres) |>
rename("Household Number" = Householdno) |>
rename("Siblings Younger than 12" = youngerthan12years) |>
mutate(Everhadvaccinated = ifelse(Everhadvaccinated == 1, "Yes", "No")) |>
mutate(Inthelasttwoweekschildhadfever = ifelse(Inthelasttwoweekschildhadfever == 1, "Yes", "No")) |>
mutate(InthelasttwoweekschildhadDiahearria = ifelse(InthelasttwoweekschildhadDiahearria == 1, "Yes", "No")) |>
mutate(Inthelasttwoweekschildhadcough = ifelse(Inthelasttwoweekschildhadcough == 1, "Yes", "No")) |>
mutate(Childsfingernailtrimmed = ifelse(Childsfingernailtrimmed == 1, "Yes", "No")) |>
mutate(Howoftendoyoutrimyourfingernails = case_when(Howoftendoyoutrimyourfingernails == 0 ~ "Less Than Once/Month",
Howoftendoyoutrimyourfingernails == 1 ~ "Once per Week",
Howoftendoyoutrimyourfingernails == 2 ~ "Once per two weeks",
is.na(Howoftendoyoutrimyourfingernails) ~ "Don't Know"),
Howoftendoyoutrimyourfingernails = factor(Howoftendoyoutrimyourfingernails, levels = c("Less Than Once/Month", "Once per Week", "Once per two weeks", "Don't Know"))) |>
mutate(Istheretoiletintheschool = case_when(Istheretoiletintheschool == 0 ~ "No",
Istheretoiletintheschool == 1 ~ "Yes",
is.na(Istheretoiletintheschool) ~ "Don't Know")) |>
mutate(Ifthereisatoiletdoesthelatrinehavedoors = case_when(Ifthereisatoiletdoesthelatrinehavedoors == 0 ~ "No",
Ifthereisatoiletdoesthelatrinehavedoors == 1 ~ "Yes",
is.na(Ifthereisatoiletdoesthelatrinehavedoors) ~ "Don't Know")) |>
mutate(Fliesobservedinaroundthelatrine = case_when(Fliesobservedinaroundthelatrine == 0 ~ "No",
Fliesobservedinaroundthelatrine == 1 ~ "Yes",
is.na(Fliesobservedinaroundthelatrine) ~ "Don't Know")) |>
mutate(Vissiblestoolobservedonlatrinefloor = case_when(Vissiblestoolobservedonlatrinefloor == 0 ~ "No",
Vissiblestoolobservedonlatrinefloor == 1 ~ "Yes",
is.na(Vissiblestoolobservedonlatrinefloor) ~ "Don't Know")) |>
mutate(Doyouknowhowintestinalwomstransmitted = case_when(Doyouknowhowintestinalwomstransmitted == 0 ~ "No",
Doyouknowhowintestinalwomstransmitted == 1 ~ "Yes",
Doyouknowhowintestinalwomstransmitted == 99 ~ "Don't Know")) |>
mutate(Doyouknowwhywormsarebadforyourhealth = case_when(Doyouknowwhywormsarebadforyourhealth == 0 ~ "No",
Doyouknowwhywormsarebadforyourhealth == 1 ~ "Yes",
Doyouknowwhywormsarebadforyourhealth == 99 ~ "Don't Know")) |>
mutate(Doyouknowhowyoucanavoidgettingtheseworms = case_when(Doyouknowhowyoucanavoidgettingtheseworms == 0 ~ "No",
Doyouknowhowyoucanavoidgettingtheseworms == 1 ~ "Yes",
Doyouknowhowyoucanavoidgettingtheseworms == 99 ~ "Don't Know")) |>
mutate(Yourlivingaddress = ifelse(Yourlivingaddress != "Amenu" & Yourlivingaddress != "Bosa Kito" & Yourlivingaddress != "Hermata mentina" & Yourlivingaddress != "Jiren" & Yourlivingaddress != "Mentina" & Yourlivingaddress != "Seto semero" & Yourlivingaddress != "Welda", "Other", Yourlivingaddress)) |>
mutate(Familyoccupation = ifelse(Familyoccupation != "Police man" & Familyoccupation != "Teacher" & Familyoccupation != "merchant" & Familyoccupation != "Carprnter" & Familyoccupation != "Dailly labor" & Familyoccupation != "Security" & Familyoccupation != "Farmer" & Familyoccupation != "Government employee" & Familyoccupation != "Merchant", "Other", Familyoccupation)) |>
mutate(Familyoccupation = ifelse(Familyoccupation == "merchant", "Merchant", Familyoccupation),
Familyoccupation = ifelse(is.na(Familyoccupation), "Other", Familyoccupation)) |>
mutate(Whatmaterialyourhousefloormadefrom = case_when(Whatmaterialyourhousefloormadefrom == 0 ~ "Dust",
Whatmaterialyourhousefloormadefrom == 1 ~ "Cement",
Whatmaterialyourhousefloormadefrom == 2 ~ "Plastic Covered",
is.na(Whatmaterialyourhousefloormadefrom) ~ "Don't Know")) |>
mutate(Isyourkitcheninyourhouseorsepatated = case_when(Isyourkitcheninyourhouseorsepatated == 0 ~ "Within House",
Isyourkitcheninyourhouseorsepatated == 2 ~ "Separated",
Isyourkitcheninyourhouseorsepatated == 99 | is.na(Isyourkitcheninyourhouseorsepatated) ~ "Don't Know")) |>
mutate(Ifseparetedwhatmaterialsyourkitchenmadefrom = case_when(Ifseparetedwhatmaterialsyourkitchenmadefrom == 0 ~ "Dust",
Ifseparetedwhatmaterialsyourkitchenmadefrom == 1 ~ "Cement",
Ifseparetedwhatmaterialsyourkitchenmadefrom == 2 ~ "Plastic Covered",
is.na(Ifseparetedwhatmaterialsyourkitchenmadefrom) | Ifseparetedwhatmaterialsyourkitchenmadefrom == 9 ~ "Don't Know")) |>
mutate(Roof = ifelse(Roof == 1, "Yes", "No"),
Wall = ifelse(Wall == 2, "Yes", "No"),
None = ifelse(None == 0, "Yes", "No")) |>
mutate(Roof = ifelse(is.na(Roof), "No", Roof),
Wall = ifelse(is.na(Wall), "No", Wall),
None = ifelse(is.na(None), "No", None)) |>
mutate(Wood = ifelse(Wood == 0, "Yes", "No"),
Gas = ifelse(Gas == 1, "Yes", "No"),
Coal = ifelse(Coal == 2, "Yes", "No"),
Kerosisn = ifelse(Kerosisn == 3, "Yes", "No"),
Electric = ifelse(Electric == 4, "Yes", "No")) |>
mutate(Wood = ifelse(is.na(Wood), "No", Wood),
Gas = ifelse(is.na(Gas), "No", Gas),
Kerosisn = ifelse(is.na(Kerosisn), "No", Kerosisn),
Coal = ifelse(is.na(Coal), "No", Coal),
Electric = ifelse(is.na(Electric), "No", Electric)) |>
mutate(Doyouhaveelectricityinyourhaouse = case_when(Doyouhaveelectricityinyourhaouse == 0 ~ "No",
Doyouhaveelectricityinyourhaouse == 1 ~ "Yes",
is.na(Doyouhaveelectricityinyourhaouse) ~ "Don't Know")) |>
mutate(Doesyourfamillyownradio = case_when(Doesyourfamillyownradio == 0 ~ "No",
Doesyourfamillyownradio == 1 ~ "Yes",
is.na(Doesyourfamillyownradio) ~ "Don't Know")) |>
mutate(Doesyourfamillyowntelevision = case_when(Doesyourfamillyowntelevision == 0 ~ "No",
Doesyourfamillyowntelevision == 1 ~ "Yes",
is.na(Doesyourfamillyowntelevision) ~ "Don't Know")) |>
mutate(Doesyourfamillymemberownaphone = case_when(Doesyourfamillymemberownaphone == 0 ~ "No",
Doesyourfamillymemberownaphone == 1 ~ "Yes",
is.na(Doesyourfamillymemberownaphone) ~ "Don't Know")) |>
mutate(Forwhatpurposeyourfamilyuseaphone = case_when(Forwhatpurposeyourfamilyuseaphone == 0 ~ "Call Only",
Forwhatpurposeyourfamilyuseaphone == 1 ~ "Call/Radio/Internet",
is.na(Forwhatpurposeyourfamilyuseaphone) ~ "Don't Know")) |>
mutate(Cattle = ifelse(Cattle == 0, "Yes", "No"),
SheepGoat = ifelse(SheepGoat == 1, "Yes", "No"),
Chicken = ifelse(Chicken == 2, "Yes", "No"),
Pet = ifelse(Pet == 3, "Yes", "No"),
Nodomanimal = ifelse(Nodomanimal == 4, "Yes", "No")) |>
mutate(Cattle = ifelse(is.na(Cattle), "No", Cattle),
SheepGoat = ifelse(is.na(SheepGoat), "No", SheepGoat),
Chicken = ifelse(is.na(Chicken), "No", Chicken),
Pet = ifelse(is.na(Pet), "No", Pet),
Nodomanimal = ifelse(is.na(Nodomanimal), "No", Nodomanimal)) |>
mutate(Doyouhavepotablewaterinyourhouse = case_when(Doyouhavepotablewaterinyourhouse == 0 ~ "No",
Doyouhavepotablewaterinyourhouse == 1 ~ "Yes",
is.na(Doyouhavepotablewaterinyourhouse) ~ "Don't Know")) |>
mutate(Ifnotwheredoyougetyordrinkingwaterfrom = case_when(Ifnotwheredoyougetyordrinkingwaterfrom == 0 ~ "Neighbor",
Ifnotwheredoyougetyordrinkingwaterfrom == 1 ~ "River",
Ifnotwheredoyougetyordrinkingwaterfrom == 2 ~ "Well",
Ifnotwheredoyougetyordrinkingwaterfrom == 3 ~ "Truck",
Ifnotwheredoyougetyordrinkingwaterfrom == 4 ~ "Tank",
Ifnotwheredoyougetyordrinkingwaterfrom == 5 ~ "Public Fountain",
Ifnotwheredoyougetyordrinkingwaterfrom == "Tap water" ~ "Tap Water",
Ifnotwheredoyougetyordrinkingwaterfrom == 10 ~ NA)) |>
mutate(Doyoudrinkdirectlyordoyoutreat = case_when(Doyoudrinkdirectlyordoyoutreat == 1 ~ "Directly",
Doyoudrinkdirectlyordoyoutreat == 0 ~ "Treat",
is.na(Doyoudrinkdirectlyordoyoutreat) ~ "Don't Know")) |>
mutate(Ifyoutreathow = case_when(Ifyoutreathow == 0 ~ "Boil",
Ifyoutreathow == 1 ~ "Chemical",
Ifyoutreathow == 2 ~ "Filter",
Ifyoutreathow == 99 ~ "Don't Know")) |>
mutate(Doyourfamilyownlatrine = ifelse(Doyourfamilyownlatrine == 1, "Yes", "No")) |>
mutate(Isyourlatrineinsideoroutside = ifelse(Isyourlatrineinsideoroutside == 1, "Inside", "Outside")) |>
mutate(Ifoutsidedistancefromyourhouse = as.numeric(str_sub(Ifoutsidedistancefromyourhouse, 1, -2))) |>
mutate(Distancebetweenlatrineandyourkitchen = as.numeric(str_sub(Distancebetweenlatrineandyourkitchen, 1, -2))) |>
mutate(Yourlatrineconnectedto = case_when(Yourlatrineconnectedto == 0 ~ "Sewage",
Yourlatrineconnectedto == 1 ~ "Ditch",
Yourlatrineconnectedto == 2 ~ "River",
Yourlatrineconnectedto == 3 ~ "Well",
Yourlatrineconnectedto == 99 | is.na(Yourlatrineconnectedto) ~ "NA/Don't Know")) |>
mutate(Howoftendoyoubathinriver = case_when(Howoftendoyoubathinriver == 0 ~ "Always",
Howoftendoyoubathinriver == 1 ~ "Sometimes",
Howoftendoyoubathinriver == 2 ~ "Never",
Howoftendoyoubathinriver == 99 | is.na(Howoftendoyoubathinriver) ~ "NA/Don't Know"),
Howoftendoyoubathinriver = factor(Howoftendoyoubathinriver, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Howoftendoyouwashyourclothesinriver = case_when(Howoftendoyouwashyourclothesinriver == 0 ~ "Always",
Howoftendoyouwashyourclothesinriver == 1 ~ "Sometimes",
Howoftendoyouwashyourclothesinriver == 2 ~ "Never",
Howoftendoyouwashyourclothesinriver == 99 | is.na(Howoftendoyouwashyourclothesinriver) ~ "NA/Don't Know"),
Howoftendoyouwashyourclothesinriver = factor(Howoftendoyouwashyourclothesinriver, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyoudeficateintheopenfield = case_when(Doyoudeficateintheopenfield == 0 ~ "Always",
Doyoudeficateintheopenfield == 1 ~ "Sometimes",
Doyoudeficateintheopenfield == 2 ~ "Never",
Doyoudeficateintheopenfield == 99 | is.na(Doyoudeficateintheopenfield) ~ "NA/Don't Know"),
Doyoudeficateintheopenfield = factor(Doyoudeficateintheopenfield, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouuseschoollatrine = case_when(Doyouuseschoollatrine == 0 ~ "Always",
Doyouuseschoollatrine == 1 ~ "Sometimes",
Doyouuseschoollatrine == 2 ~ "Never",
Doyouuseschoollatrine == 99 | is.na(Doyouuseschoollatrine) ~ "NA/Don't Know"),
Doyouuseschoollatrine = factor(Doyouuseschoollatrine, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouusetoiletpapertowipeyourbumafterdefication = case_when(Doyouusetoiletpapertowipeyourbumafterdefication == 0 ~ "Always",
Doyouusetoiletpapertowipeyourbumafterdefication == 1 ~ "Sometimes",
Doyouusetoiletpapertowipeyourbumafterdefication == 2 ~ "Never",
Doyouusetoiletpapertowipeyourbumafterdefication == 99 | is.na(Doyouusetoiletpapertowipeyourbumafterdefication) ~ "NA/Don't Know"),
Doyouusetoiletpapertowipeyourbumafterdefication = factor(Doyouusetoiletpapertowipeyourbumafterdefication, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouwashyourhandsaftertoilet = case_when(Doyouwashyourhandsaftertoilet == 0 ~ "Always",
Doyouwashyourhandsaftertoilet == 1 ~ "Sometimes",
Doyouwashyourhandsaftertoilet == 2 ~ "Never",
Doyouwashyourhandsaftertoilet == 99 | is.na(Doyouwashyourhandsaftertoilet) ~ "NA/Don't Know"),
Doyouwashyourhandsaftertoilet = factor(Doyouwashyourhandsaftertoilet, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Howdoyouwashyourhandsaftertoilet = case_when(Howdoyouwashyourhandsaftertoilet == 0 ~ "Water",
Howdoyouwashyourhandsaftertoilet == 1 ~ "Soap and Water",
Howdoyouwashyourhandsaftertoilet == 99 | is.na(Howdoyouwashyourhandsaftertoilet) ~ "NA/Don't Know"),
Howdoyouwashyourhandsaftertoilet = factor(Howdoyouwashyourhandsaftertoilet, levels = c("Water", "Soap and Water", "NA/Don't Know"))) |>
mutate(Ifwithsoaphowoftenyouuseit = case_when(Ifwithsoaphowoftenyouuseit == 0 ~ "Always",
Ifwithsoaphowoftenyouuseit == 1 ~ "Sometimes",
Ifwithsoaphowoftenyouuseit == 2 ~ "Never",
Ifwithsoaphowoftenyouuseit == 99 | is.na(Ifwithsoaphowoftenyouuseit) ~ "NA/Don't Know"),
Ifwithsoaphowoftenyouuseit = factor(Ifwithsoaphowoftenyouuseit, levels = c("Never", "Sometimes","Always", "NA/Don't Know"))) |>
mutate(Doyouwashyourhandsbeforeeating = case_when(Doyouwashyourhandsbeforeeating == 0 ~ "Always",
Doyouwashyourhandsbeforeeating == 1 ~ "Sometimes",
Doyouwashyourhandsbeforeeating == 2 ~ "Never",
Doyouwashyourhandsbeforeeating == 99 | is.na(Doyouwashyourhandsbeforeeating) ~ "NA/Don't Know"),
Doyouwashyourhandsbeforeeating = factor(Doyouwashyourhandsbeforeeating, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Howdoyouwashyourhandsbeforeeating = case_when(Howdoyouwashyourhandsbeforeeating == 0 ~ "Water",
Howdoyouwashyourhandsbeforeeating == 1 ~ "Soap and Water",
Howdoyouwashyourhandsbeforeeating == 99 | is.na(Howdoyouwashyourhandsbeforeeating) | Howdoyouwashyourhandsbeforeeating == 2 ~ "NA/Don't Know"),
Howdoyouwashyourhandsbeforeeating = factor(Howdoyouwashyourhandsbeforeeating, levels = c("Water", "Soap and Water", "NA/Don't Know"))) |>
mutate(Ifwithsoaphowoftenyouuseit_A = case_when(Ifwithsoaphowoftenyouuseit_A == 0 ~ "Always",
Ifwithsoaphowoftenyouuseit_A == 1 ~ "Sometimes",
Ifwithsoaphowoftenyouuseit_A == 2 ~ "Never",
Ifwithsoaphowoftenyouuseit_A == 99 | is.na(Ifwithsoaphowoftenyouuseit_A) ~ "NA/Don't Know"),
Ifwithsoaphowoftenyouuseit_A = factor(Ifwithsoaphowoftenyouuseit_A, levels = c("Never", "Sometimes","Always", "NA/Don't Know"))) |>
mutate(Doyoueatsoil = case_when(Doyoueatsoil == 0 ~ "Always",
Doyoueatsoil == 1 ~ "Sometimes",
Doyoueatsoil == 2 ~ "Never",
Doyoueatsoil == 99 | is.na(Doyoueatsoil) ~ "NA/Don't Know"),
Doyoueatsoil = factor(Doyoueatsoil, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Whatisyourfavoritefruitethatyoueat = ifelse(Whatisyourfavoritefruitethatyoueat != "Mango" & Whatisyourfavoritefruitethatyoueat != "Banana" & Whatisyourfavoritefruitethatyoueat != "Avocado" & Whatisyourfavoritefruitethatyoueat != "Apple" & Whatisyourfavoritefruitethatyoueat != "Pinapple", "Other", Whatisyourfavoritefruitethatyoueat),
Whatisyourfavoritefruitethatyoueat = ifelse(is.na(whatfooddoyoueatmost), "Other", Whatisyourfavoritefruitethatyoueat)) |>
mutate(Doyouwashyourfruitesbeforeeating = case_when(Doyouwashyourfruitesbeforeeating == 0 ~ "Always",
Doyouwashyourfruitesbeforeeating == 1 ~ "Sometimes",
Doyouwashyourfruitesbeforeeating == 2 ~ "Never",
Doyouwashyourfruitesbeforeeating == 99 | is.na(Doyouwashyourfruitesbeforeeating) ~ "NA/Don't Know"),
Doyouwashyourfruitesbeforeeating = factor(Doyouwashyourfruitesbeforeeating, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyoueatraworundercookedvegitables = case_when(Doyoueatraworundercookedvegitables == 0 ~ "Always",
Doyoueatraworundercookedvegitables == 1 ~ "Sometimes",
Doyoueatraworundercookedvegitables == 2 ~ "Never",
Doyoueatraworundercookedvegitables == 99 | is.na(Doyoueatraworundercookedvegitables) ~ "NA/Don't Know"),
Doyoueatraworundercookedvegitables = factor(Doyoueatraworundercookedvegitables, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Ifyeshowoftenyouwashyourvegitablesbeforeeating = case_when(Ifyeshowoftenyouwashyourvegitablesbeforeeating == 0 ~ "Always",
Ifyeshowoftenyouwashyourvegitablesbeforeeating == 1 ~ "Sometimes",
Ifyeshowoftenyouwashyourvegitablesbeforeeating == 2 ~ "Never",
Ifyeshowoftenyouwashyourvegitablesbeforeeating == 99 | is.na(Ifyeshowoftenyouwashyourvegitablesbeforeeating) ~ "NA/Don't Know"),
Ifyeshowoftenyouwashyourvegitablesbeforeeating = factor(Ifyeshowoftenyouwashyourvegitablesbeforeeating, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(Doyouwalkbarefoot = case_when(Doyouwalkbarefoot == 0 ~ "Always",
Doyouwalkbarefoot == 1 ~ "Sometimes",
Doyouwalkbarefoot == 2 ~ "Never",
Doyouwalkbarefoot == 99 | is.na(Doyouwalkbarefoot) ~ "NA/Don't Know"),
Doyouwalkbarefoot = factor(Doyouwalkbarefoot, levels = c("Never", "Sometimes", "Always", "NA/Don't Know"))) |>
mutate(whenyouareathomedoyoupreferetousesandalsorshoe = case_when(whenyouareathomedoyoupreferetousesandalsorshoe == 0 ~ "Barefoot",
whenyouareathomedoyoupreferetousesandalsorshoe == 1 ~ "Sandals",
whenyouareathomedoyoupreferetousesandalsorshoe == 2 ~ "Shoes",
whenyouareathomedoyoupreferetousesandalsorshoe == 99 | is.na(whenyouareathomedoyoupreferetousesandalsorshoe) ~ "NA/Don't Know"),
whenyouareathomedoyoupreferetousesandalsorshoe = factor(whenyouareathomedoyoupreferetousesandalsorshoe, levels = c("Barefoot", "Sandals", "Shoes", "NA/Don't Know"))) |>
mutate(Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill = case_when(Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill == 0 ~ "No",
Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill == 1 ~ "Yes",
Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill == 99 | is.na(Didyourparentsteachersorhealthprofessionalsgaveyouadewormingpill) ~ "NA/Don't Know"))|>
mutate(Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill = case_when(Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "1Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "2Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "3month" ~ "1-3 Months",
Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "5Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "6Month" ~ "4-6 Months",
Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "7Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "9Month" ~ "7-9 Months",
Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "11Month" | Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill == "12month" ~ ">9 Months",
is.na(Ifyeswhenwasthelasttimetheygaveyousuchdewormingpill) ~ NA)) |>
mutate(Didyourparentsorhealthprofessionalsgaveyouotherantibiotics = case_when(Didyourparentsorhealthprofessionalsgaveyouotherantibiotics == 0 ~ "No",
Didyourparentsorhealthprofessionalsgaveyouotherantibiotics == 1 ~ "Yes",
Didyourparentsorhealthprofessionalsgaveyouotherantibiotics == 99 | is.na(Didyourparentsorhealthprofessionalsgaveyouotherantibiotics) ~ "NA/Don't Know")) |>
mutate(Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently = case_when(Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently == 0 ~ "No",
Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently == 1 ~ "Yes",
Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently == 99 | is.na(Isanydrugsprescribedbyhealthinstituionforanyillnesscurrently) ~ "NA/Don't Know")) |>
mutate(Inthepastthreemonthshaveyoutakenanyantimalarialdrug = case_when(Inthepastthreemonthshaveyoutakenanyantimalarialdrug == 0 ~ "No",
Inthepastthreemonthshaveyoutakenanyantimalarialdrug == 1 ~ "Yes",
Inthepastthreemonthshaveyoutakenanyantimalarialdrug == 99 | is.na(Inthepastthreemonthshaveyoutakenanyantimalarialdrug) ~ "NA/Don't Know")) |>
mutate(Haveachildwheezingorwhistlinginchest = case_when(Haveachildwheezingorwhistlinginchest == 2 ~ "No",
Haveachildwheezingorwhistlinginchest == 1 ~ "Yes",
Haveachildwheezingorwhistlinginchest == 99 | is.na(Haveachildwheezingorwhistlinginchest) ~ "NA/Don't Know")) |>
mutate(Howmanytimesinthelastyearthechildhadwheeziling = case_when(Howmanytimesinthelastyearthechildhadwheeziling == 2 ~ "1-3",
Howmanytimesinthelastyearthechildhadwheeziling == 1 ~ "0",
Howmanytimesinthelastyearthechildhadwheeziling == 99 | is.na(Howmanytimesinthelastyearthechildhadwheeziling) ~ "NA/Don't Know")) |>
mutate(Hasachildeverhadasthma = case_when(Hasachildeverhadasthma == 2 ~ "No",
Hasachildeverhadasthma == 1 ~ "Yes",
Hasachildeverhadasthma == 99 | is.na(Hasachildeverhadasthma) ~ "NA/Don't Know")) |>
mutate(Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases = case_when(Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases == 2 ~ "No",
Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases == 1 ~ "Yes",
Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases == 99 | is.na(Doesachildeverhadanitchyskinrashwhichhasaffectedtheskincreases) ~ "NA/Don't Know")) |>
mutate(Ifyeshasthisrashaffectedtheelbowfolds = ifelse(is.na(Ifyeshasthisrashaffectedtheelbowfolds), 0, Ifyeshasthisrashaffectedtheelbowfolds),
Ifyeshasthisrashaffectedbehindtheknees = ifelse(is.na(Ifyeshasthisrashaffectedbehindtheknees), 0, Ifyeshasthisrashaffectedbehindtheknees),
Ifyeshasthisrashaffectedinfrontoftheankls = ifelse(is.na(Ifyeshasthisrashaffectedinfrontoftheankls), 0, Ifyeshasthisrashaffectedinfrontoftheankls),
Ifyeshasthisrashaffectedunderthebuttucks = ifelse(is.na(Ifyeshasthisrashaffectedunderthebuttucks), 0, Ifyeshasthisrashaffectedunderthebuttucks),
Ifyeshasthisrashaffectedaroundtheneck = ifelse(is.na(Ifyeshasthisrashaffectedaroundtheneck), 0, Ifyeshasthisrashaffectedaroundtheneck),
Ifyeshasthisrashaffectedaroundtheeyesears = ifelse(is.na(Ifyeshasthisrashaffectedaroundtheeyesears), 0, Ifyeshasthisrashaffectedaroundtheeyesears)) |>
select(-AL, -TT, -HW, -SM, -Others, -Date, -parentconsent, -childassent, -Grade, -GradeLet, -WAZ, -HAZ, -BAZ, -Wheredoyoulive, -Doesachildasthmainthelastyear, -Doesachildhadasthmainthelast2years, -Hasthisbeenconfirmedbyadoctor, -Doesthechildhadhayfeverorsneezingwithrunningnoseinthelast2years, -Doesthechildhadhayfeverorsneezingwithrunningnoseinthelastyear, -V137, -AgeGroup, -HouseholdGroup) |>
mutate(Doesthechildhadhayfeverorpersistantsneezing = case_when(Doesthechildhadhayfeverorpersistantsneezing == 2 ~ "No",
Doesthechildhadhayfeverorpersistantsneezing == 1 ~ "Yes",
Doesthechildhadhayfeverorpersistantsneezing == 99 | is.na(Doesthechildhadhayfeverorpersistantsneezing) ~ "NA/Don't Know")) |>
mutate(Arechildsfingernailsdirty = ifelse(Arechildsfingernailsdirty == 1, "Yes", "No")) |>
rename(Kerosene = Kerosisn) |>
select(-ID, -Seq_ID)
sample_data(dat)  <- analysis_dat
write_rds(dat, "new_cleaned_ps.rds")
library(phyloseq)
library(vegan)
library(readr)
write_rds(dat, "new_cleaned_ps.rds")
sample_data <- readRDS("new_cleaned_ps.rds")
sample_data <- readRDS("new_cleaned_ps.rds")
ps <- readRDS("new_cleaned_ps.rds")
a_diversity <- estimate_richness(ps)
View(a_diversity)
a_diversity$sample <- rownames(sample_data)
a_diversity <- merge(sample_data, a_diversity) |>
select(-sample_data)
sample_data <- ps@sam_data
View(sample_data)
a_diversity$sample <- rownames(sample_data)
a_diversity <- estimate_richness(ps)
sample_data <- ps@sam_data
a_diversity$sample <- rownames(sample_data)
a_diversity <- merge(sample_data, a_diversity) |>
select(-sample_data)
a_diversity <- estimate_richness(ps)
sample_data <- ps@sam_data
a_diversity$sample <- rownames(sample_data)
View(a_diversity)
